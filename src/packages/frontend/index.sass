/*
 *  This file is part of CoCalc: Copyright © 2020-2026 Sagemath, Inc.
 *  License: MS-RSL – see LICENSE.md for details
 */

// color scheme -- generated by running scripts/update_color_scheme.coffee
@use 'colors'
@use 'mixins'
@use 'codemirror_plugins'
@use 'bootstrap'
@use 'idle'
@use 'console'
@use 'activity'
@use 'projects_nav'
@use 'project_page'
@use 'projects'
@use 'examples'
@use 'editor'
@use 'jupyter'
@use 'interact'
@use '3d' as threejs
@use 'd3'
@use 'jsoninspector'
@use 'profile'
@use 'jupyter/jupyter' as jupyter-jupyter
@use 'frame-editors/_style' as frame-editors-style
@use 'notifications/_style' as notifications-style
@use 'account-button'
@use 'account/_account' as account-account
@use 'admin/_style' as admin-style
@use 'antd_fix'

@font-face
  font-family : droid-sans-mono
  font-style  : normal
  font-weight : normal
  src         : local("Droid Sans Mono"), local("DroidSansMono"), url('@cocalc/assets/fonts/droid/DroidSansMono.ttf') format("truetype")

.hide
  display : none

.tt
  font-family : monospace

.lighten
  color : #666

.lighten-2
  color : #999

.small
  font-size : 9pt

.smallish
  font-size : 10pt

.large
  font-size : 16pt

.Large
  font-size : 18pt

.huge
  font-size : 22pt

.bold
  font-weight : bold

.close
  font-size : 20pt

// Explorer file listing table
.cc-explorer-table
  // Make the antd table fill the flex container, pagination at bottom
  .ant-table-wrapper
    flex: 1 1 auto
    display: flex
    flex-direction: column
  .ant-spin-nested-loading, .ant-spin-container
    flex: 1 1 auto
    display: flex
    flex-direction: column
  .ant-table
    flex: 1 1 auto
  // Remove all default row backgrounds (including zebra stripes)
  .ant-table-row > td
    background: white !important
    border-bottom: none !important
    transition: none !important
  // Hover: faint blue (kept subtle so DnD drop-target highlight stands out)
  .ant-table-row:hover > td
    background-color: colors.$COL_BLUE_LLLL !important
    transition: none !important
  // Checked (selected via checkbox): matches flyout selected style
  .cc-explorer-row-checked > td
    background-color: colors.$COL_BLUE_LLL !important
  // Keyboard-selected row: blue background (matching flyout selection)
  .cc-explorer-row-selected > td
    background-color: colors.$COL_BLUE_LLL !important
  // DnD drop target: folder row being hovered during drag
  // Must override both default bg and hover bg, hence doubled specificity
  .cc-explorer-row-drop-target > td,
  .cc-explorer-row-drop-target:hover > td
    background-color: colors.$COL_BLUE_LLL !important
  // DnD invalid drop target (e.g. folder onto itself): red tint
  .cc-explorer-row-drop-invalid > td,
  .cc-explorer-row-drop-invalid:hover > td
    background-color: colors.$COL_ANTD_BG_RED_L !important
  // Clean header styling (matches flyout panel background)
  .ant-table-thead > tr > th
    background: colors.$COL_GRAY_LL !important
    border-bottom: 1px solid colors.$COL_GRAY_L0 !important
    font-weight: 600
  // Pointer cursor on sortable headers
  .ant-table-column-has-sorters
    cursor: pointer
  // Expanded directory peek row: remove default cell padding
  .cc-explorer-expanded-row
    .ant-table-expanded-row-cell
      padding: 0 !important

// Explorer right-click context menu: compact item sizing
.cc-explorer-context-menu
  .ant-menu-item
    height: 28px
    line-height: 28px
    padding: 0 12px !important
    margin: 0 !important
    font-size: 13px
  .ant-menu-item-divider
    margin: 4px 0 !important

// DnD: highlight all folder drop targets when a file is being dragged
body.cc-file-dragging
  [data-folder-drop-path]
    background-color: rgba(colors.$COL_RUN, 0.06) !important
    transition: background-color 0.15s
  // Explorer folder rows: need to target <td> inside the <tr>
  .cc-explorer-table tr[data-folder-drop-path] > td
    background-color: rgba(colors.$COL_RUN, 0.06) !important
  // Project tabs: non-active tabs are cross-project copy targets
  .cc-projects-nav .ant-tabs-tab:not(.ant-tabs-tab-active)
    background-color: rgba(colors.$COL_RUN, 0.12) !important
    transition: background-color 0.15s

.center
  text-align : center

body
  padding-top: 0
  width      : 100vw
  overflow-x : hidden

div#smc-react-container
  overflow   : hidden
  position   : absolute
  top        : 0px



  /* mezzo-small, larger than xs, smaller than sm, like the old tasklist button size */

.btn-ms
  padding-bottom : 2px
  padding-left   : 10px
  padding-right  : 10px
  padding-top    : 2px
  letter-spacing : normal
  line-height    : 20px
  margin-bottom  : 0px
  margin-left    : -1px
  margin-right   : 0px
  margin-top     : 0px
  font-size      : 11.9px

@media (max-width: 767px)
  .webapp-project
    position : relative !important
    top      : 0px !important

.help-smc-logo
  width  : 100px
  height : 100px
  @media (max-width: 767px)
    width  : 40px
    height : 40px

/* so on iOS scroll-into-view modals work */
@media (max-width: 480px)
  .modal.fade.in
    top : 10px

@media (max-width: 767px)
  .smc-big-only
    display : none

@media (min-width: 768px)
  .smc-small-only
    display : none

.CodeMirror, .CodeMirror-wrap
  line-height : normal

/* This somewhat mostly fixes https://github.com/sagemathinc/cocalc/issues/4663
   It's not 100% since some non-default themes also change the colors.
   However #999 is at least *readable* usually. */
.CodeMirror-linenumber::selection
  color : #999


/* see http://stackoverflow.com/questions/271067/how-can-i-make-a-textarea-100-width-without-overflowing-when-padding-is-present  */

.boxsizingBorder
  -webkit-box-sizing : border-box
  -moz-box-sizing    : border-box
  box-sizing         : border-box

.highlight
  background-color : orange
  padding          : 3px
  margin           : -3px
  border-radius    : 3px

/* fix bootstrap ugliness  */
code
  color            : revert
  background-color : revert
  padding          : 0

blockquote p
  font-size : 15px

.constrained
  max-width : 1170px

.modal h3
  margin : 0

.modal-footer
  padding : 5px

.modal-backdrop
  z-index: 100

input[type="text"], select, input[type="email"], select, input[type="password"], select
  margin-bottom : 1px

.btn
  white-space : normal

.btn-black
  color            : #fff
  background-color : #000000
  border-color     : #000000

a[role="button"]
  +mixins.disable-user-select
  cursor : pointer

.tooltip
  font-size : 11px

.navbar-default
  .navbar-collapse, .navbar-form
    position : relative
    top      : 1px

/* Add a scrollbar to menus when the screen is too small
 * A manu cannot be taller than 60% of the screen, a scrollbar is added if it's the case
 */
.dropdown-menu
  max-height : 60vh
  overflow-y : auto

/* From http://stackoverflow.com/questions/13955163/imitating-a-blink-tag-with-css3-animations  */

.blink
  animation         : blink 1s steps(5, start) infinite
  -webkit-animation : blink 1s steps(5, start) infinite

@keyframes blink
  to
    visibility : hidden

@-webkit-keyframes blink
  to
    visibility : hidden


.cm-spell-error
  background-image    : url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAYAAAB/qH1jAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QUXCToH00Y1UgAAACFJREFUCNdjPMDBUc/AwNDAAAFMTAwMDA0OP34wQgX/AQBYgwYEx4f9lQAAAABJRU5ErkJggg==)
  background-position : bottom left
  background-repeat   : repeat-x

*[data-toggle*="collapse"]
  cursor: pointer

.cursor-pointer
  cursor: pointer

/* Fix menubar height at the top of the screen, mainly on Firefox. */
ul.nav.pull-right.navbar-nav li
  height : 40px

/* Prevent text from selecting when holding shift to select a range in the project files */
.noselect
  -webkit-touch-callout : none
  -webkit-user-select   : none
  -khtml-user-select    : none
  -moz-user-select      : none
  -ms-user-select       : none
  user-select           : none

.smc-grow
  transition: all .1s ease-in-out
  -webkit-transition : -webkit-transform .1s ease-in
  -moz-transition    : -moz-transform .1s ease-in
  -o-transition      : -o-transform .1s ease-in
  transition         : transform .1s ease-in

  &:hover
    -webkit-transform : scale(1.1)
    -moz-transform    : scale(1.1)
    -ms-transform     : scale(1.1)
    -o-transform      : scale(1.1)
    transform         : scale(1.1)

.smc-grow-two
  transition: all .1s ease-in-out
  -webkit-transition : -webkit-transform .1s ease-in
  -moz-transition    : -moz-transform .1s ease-in
  -o-transition      : -o-transform .1s ease-in
  transition         : transform .1s ease-in

  &:hover
    -webkit-transform : scale(1.4)
    -moz-transform    : scale(1.4)
    -ms-transform     : scale(1.4)
    -o-transform      : scale(1.4)
    transform         : scale(1.4)

.input-group
    z-index : 0

footer
  color : colors.$COL_GRAY_M
  a
    color : colors.$COL_GRAY_M

@keyframes pulse
  0%
    color: #c9302c
    transform: translateY(0px)
  2%
    color: #cc0000
    transform: translateY(-4px)
  4%
    color: #c9302c
    transform: translateY(0px)
  6%
    color: #cc0000
    transform: translateY(-4px)
  8%
    color: #c9302c
    transform: translateY(0px)
  100%
    color: #c9302c

@keyframes ring
  0%
    transform: rotate(-15deg)
  1%
    transform: rotate(12deg)
  2%
    transform: rotate(-10deg)
  3%
    transform: rotate(8deg)
  5%
    transform: rotate(-4deg)
  7%
    transform: rotate(2deg)
  10%
    transform: rotate(0deg)
  100%
    transform: rotate(0deg)

.smc-chat-notification
  animation: pulse 10s ease infinite

.smc-bell-notification
  animation: ring 10s ease infinite

.webapp-landing-sign-up-highlight
  a
    color: colors.$COL_GRAY_LL
  a:hover
    color: white

.cocalc-pdfjs-page
  border-left: 30px solid #525659
  border-right: 30px solid #525659
  border-bottom: 5px solid #525659
  border-top: 5px solid #525659

// issue #2892 -- katex formulas mangled in RTL contexts
// this here is just a workaround
span.katex
  direction: ltr

// the marker looks absurdly tiny otherwise...
//.CodeMirror-guttermarker-open
//  cursor: pointer

//.CodeMirror-guttermarker-closed
//  cursor: pointer

//.CodeMirror-guttermarker-subtle
//  position: absolute
//  font-size: 28px
//  margin-top: -14px


// issue https://github.com/sagemathinc/cocalc/issues/3389
// fixing terminal scroll bar
div.cocalc-xtermjs > div.terminal.xterm > div.xterm-viewport
  background: transparent !important
  z-index: 1

.dropzone
  min-height : 130px

  .dz-default.dz-message
    opacity  : .7

.dropdown-splitbutton-left>div>ul.dropdown-menu
  right: 0
  left: auto
  padding-left: 1px
  padding-right: 1px

// Fix issue https://github.com/sagemathinc/cocalc/issues/4568
blockquote
  font-size: inherit
blockquote p
  font-size: inherit

.cc-help-stats-table
  th, td
    text-align     : right

// see https://wordpress.org/support/topic/katex-block-doesnt-break-formulas-into-lines/
// Also in /packages/next/styles/globals.css
.katex-html
    white-space: pre-wrap

// we want to make sure all anchor tags are by default a pointer
// https://github.com/sagemathinc/cocalc/issues/6266
a
  cursor: pointer

// Needed for details to render properly and also to show a nice pointer.
// See https://github.com/sagemathinc/cocalc/issues/6312
// (NOTE: This is undoing something that "normalize.less" somehow does for unknown reasons.)
details summary
  cursor: pointer
  display: list-item


.cocalc-slate-insert-cell
  &:hover .cocalc-slate-insert-cell-controls
    display: block

.cocalc-slate-insert-cell-controls
  display: none
  z-index: 1
  position: relative
  top: -6px
  &:hover
    display: block

div.cc-project-fixedtab:hover
  background-color: colors.$COL_BLUE_LLLL
  cursor: pointer

span.cc-project-fixedtab-close
  flex: 0
  float: right
  font-size: 12px  // same as Antd closable tabs
  color: colors.$COL_GRAY
  &:hover
    background-color: colors.$COL_GRAY_L0

span.cc-project-fixedtab-drag:hover
  background-color: colors.$COL_GRAY_L0
  cursor: move

div.cc-project-flyout-file-item:hover
  background-color: colors.$COL_BLUE_LLLL

// Flyout type filter: orange highlight when a filter is active
.cc-flyout-type-filter-active .ant-select-selector
  background-color: colors.$COL_ANTD_ORANGE !important
