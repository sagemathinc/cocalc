<!--
Editor for files in a project
-->

<div id="salvus-editor-templates" class="hide">

    <!-- Template for the entire editor, both tabs and the actual content -->
    <div class="salvus-editor" style="margin-left:3em;">
        <div class="salvus-editor-recent-files">
            <div class="row">
                <div class="col-sm-6" style="margin-bottom:1ex">
                    <input class="salvus-editor-search-openfiles-input search-query form-control" type="text" placeholder="Choose files...">
                    <i class="salvus-editor-search-openfiles-input-clear lighten fa fa-times-circle" style="cursor:pointer; margin-left: -2em;"></i>
                </div>
                <div class="col-lg-offset-1 col-sm-4">
                    <a class="btn btn-sm btn-success" href="#save-all"><i class="fa fa-save"> </i> Save all</a>
                    <a class="btn btn-sm btn-warning" href="#close-all-tabs"><i class="fa fa-minus-sign"> </i> Clear</a>
                    <a class="btn btn-sm btn-warning hide" href="#undo-close-all-tabs"><i class="fa fa-undo"> </i> Undo</a>
                </div>
            </div>
            <div class="row">
                <!-- The recently opened files  go in this ul: -->
                <ul class="nav nav-pills" style="cursor: default;">
                </ul>
            </div>
        </div>

        <div class="row" style="margin-top:1ex;">
            <!-- The editor content gets displayed here -->
            <div class="salvus-editor-content">
            </div>
        </div>
    </div>

    <!-- Template for the tab at the top of the editor with filename and an x -->
    <ul> <!-- ul so is valid html -->
        <li class="super-menu salvus-editor-filename-pill">
            <div class="salvus-editor-close-button-x pull-right lighten"><i class="fa fa-times"></i></div>
            <a>
                <span class="salvus-editor-tab-filename"></span>
            </a>
        </li>
    </ul>

    <!-- Template for the codemirror text editor -->
    <div class="salvus-editor-codemirror well">
        <div class="salvus-editor-codemirror-button-row">
            <div class="hidden-xs salvus-editor-chat-title pull-right">
                <i class="fa fa-caret-down salvus-editor-chat-hide"></i>
                <i class="fa fa-caret-left hide salvus-editor-chat-show"></i>
                <i class="fa fa-comments-o salvus-editor-chat-new-chats hide"></i>
                <i class="fa fa-comment salvus-editor-chat-no-new-chats"> </i>
                &nbsp;
            </div>
            <div class="salvus-editor-codemirror-button-container">
                <span class="visible-xs">
                    <span class="btn-group">
                        <a href="#close" class="btn btn-default btn-lg"><i class="fa fa-toggle-up"></i> <span>Files...</span></a>
                        <a href="#save" class="btn  btn-success btn-lg"><i class="fa fa-save"></i></a>
                        <a href="#goto-line" class="btn btn-default btn-lg"><i class="fa fa-bolt"> </i></a>
                    </span>


                    <span class="btn-group salvus-editor-codemirror-worksheet-buttons hide" style="display: inline-block !important;">
                        <a href="#execute" class="btn btn-success btn-lg"> <i class="fa fa-play"></i></a>
                        <a href="#interrupt" class="btn btn-warning btn-lg"> <i class="fa fa-stop"></i></a>
                        <a href="#tab" class="btn btn-default btn-lg"> <i class="fa fa-info-circle"></i></a>
                    </span>


                    <span class="btn-group">
                        <a href="#decrease-font" class="btn btn-default btn-lg"><i class="fa fa-font" style="font-size:8pt"> </i> </a>
                        <a href="#increase-font" class="btn btn-default btn-lg"><i class="fa fa-font" style="font-size:13pt"> </i> </a>
                    </span>

                </span>
                <span class="hidden-xs">
                    <span class="salvus-editor-codemirror-worksheet-buttons hide">
                        <span class="btn-group">
                            <a href="#execute" class="btn btn-sm btn-success" data-container="body" data-toggle="tooltip" data-placement="right" title="Execute current or selected cells."><i class="fa fa-play"></i> Run</a>
                            <a href="#interrupt" class="btn btn-sm btn-warning" data-container="body" data-toggle="tooltip" data-placement="right" title="Interrupt the running Sage process."><i class="fa fa-stop"></i> Stop</a>
                            <a href="#kill" class="btn btn-sm btn-warning" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Restart the running Sage process."><i class="fa fa-refresh"></i> Restart</a>
                        </span>
                        <span class="btn-group">
                            <a href="#toggle-input" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="right" title="Toggle display of input of selected cells."><i class="fa fa-eye-slash"></i></a>
                            <a href="#toggle-output" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="right" title="Toggle display of output of selected cells."><i class="fa fa-adjust"></i></a>
                            <a href="#delete-output" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="right" title="Delete output of selected cells."><i class="fa fa-times-circle"></i></a>
                        </span>
                    </span>
                </span>
                <span class="hidden-xs btn-group">
                    <a href="#undo" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Undo"><i class="fa fa-undo"></i></a>
                    <a href="#redo" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Redo"><i class="fa fa-repeat"></i></a>
                    <a href="#autoindent" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Autoindent selected text"><i class="fa fa-magic"></i></a>
                    <a href="#shift-left" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Shift selected text left"><i class="fa fa-outdent"></i></a>
                    <a href="#shift-right" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Shift selected text right"><i class="fa fa-indent"></i></a>
                    <a href="#search" class="btn btn-sm btn-default btn-history" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Search"><i class="fa fa-search"></i></a>
                    <a href="#prev" class="btn btn-sm btn-default btn-history" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Previous"><i class="fa fa-chevron-up"></i></a>
                    <a href="#next" class="btn btn-sm btn-default btn-history" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Next"><i class="fa fa-chevron-down"></i></a>
                    <a href="#replace" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Replace"><i class="fa fa-exchange"></i></a>
                    <a href="#split-view" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Toggle split view"><i class="fa fa-film"></i></a>
                    <a href="#decrease-font" class="btn btn-sm btn-default btn-history" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Decrease text size"><i class="fa fa-font" style="font-size:7pt"> </i> </a>
                    <a href="#increase-font" class="btn btn-sm btn-default btn-history" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Increase text size"><i class="fa fa-font" style="font-size:11pt"> </i> </a>
                    <a href="#goto-line" class="btn btn-sm btn-default btn-history" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Go to line"><i class="fa fa-bolt"> </i> </a>
                    <a href="#print" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Print"><i class="fa fa-print"> </i> </a>
                </span>

                <span>&nbsp;</span>
                <span class="salvus-editor-save-group">
                    <a href="#save" class="hidden-xs btn btn-sm btn-success" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Save file to disk (file is constantly sync'd with server).">
                        <i class="fa fa-save"></i>
                        <span>Save</span>
                    </a>

                    <span class="salvus-editor-codemirror-sync">
                        <span class="salvus-editor-codemirror-not-synced hide"><i class="fa fa-spinner"></i> sync…</span>
                        <span class="salvus-editor-codemirror-synced hide"><i class="fa fa-ok"></i></span>
                    </span>

                    <span class="salvus-editor-codemirror-loading">
                        <i class="fa fa-spinner"></i> load…
                    </span>
                </span>
                <a href="#history" class="hidden-xs btn btn-sm btn-info salvus-editor-history-button hide" data-container="body" data-toggle="tooltip" data-placement="bottom" title="View the history of this file." style="display: inline-block !important;">
                    <i class="fa fa-history"></i>
                    <span>History</span>
                </a>
                <span class="salvus-editor-history-controls hide">
                    <span class="salvus-editor-history-control-button-container btn-group">
                        <a href="#back" class="btn btn-default btn-sm" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Back"><i class="fa fa-step-backward"></i></a>
                        <a href="#forward" class="btn btn-default btn-sm disabled" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Forward"><i class="fa fa-step-forward"></i></a>
                    </span>
                    <span class="salvus-editor-history-revision-number"></span>
                    <span class="salvus-editor-history-revision-time"></span>
                </span>
                <div class="salvus-editor-history-slider hide"></div>
                
                <span class="salvus-editor-latex-buttons hide">
                    <span class="btn-group">
                       <a href="#forward-search" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Forward search (Alt+Enter)"><i class="fa fa-mail-forward"></i><span class="hidden-xs"> Forward</span></a>
                       <a href="#inverse-search" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Inverse search (Double or Ctrl+Click)"><i class="fa fa-mail-reply"></i><span class="hidden-xs">  Inverse</span></a>
                    </span>
                    <span class="btn-group">
                        <a href="#png-preview" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Show preview"><i class="fa fa-building"></i> Preview</a>
                        <a href="#errors" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Show errors and warnings"><i class="fa fa-bug"></i><span class="hidden-xs">  Issues </span><span class="salvus-latex-errors-counter"></span> <span class="salvus-latex-warnings-counter"></span></a>
                        <a href="#pdf-preview" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Show final rendered PDF"><i class="fa fa-eye"></i> PDF</a>
                        <a href="#log" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Show compilation log (save causes recompile)"><i class="fa fa-bolt"></i><span class="hidden-xs">  Build</span>
                            <span class="salvus-latex-build-status"></span></a>
                    </span>
                </span>

                <span class="salvus-editor-codemirror-filename pull-right">
                </span>

            </div>
        </div>
        <div class="salvus-editor-codemirror-input-container">
            <div class="row">
                <div class="salvus-editor-codemirror-input-box col-sm-9">
                    <textarea></textarea>
                </div>
                <div class="salvus-editor-codemirror-chat-column hide col-sm-3">
                    <div class="salvus-editor-codemirror-chat">
                        <div class="salvus-editor-codemirror-chat-output"></div>
                        <textarea class="salvus-editor-codemirror-chat-input form-control" placeholder="Write something..."></textarea>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="salvus-editor-codemirror-input-box-1 col-sm-9">
                    <textarea></textarea>
                </div>
            </div>
        </div>
    </div>

    <!-- Template for chat entries -->

    <div class="salvus-chat-entry">
        <div class="salvus-chat-header">
            <span class="salvus-chat-header-name"></span>
            (<span class="salvus-chat-header-date"></span>):
        </div>
        <span class="salvus-chat-entry-content">
        </span>
    </div>

    <!-- Template for the codemirror text editor other user cursors -->
    <div class="salvus-editor-codemirror-cursor"><span class="salvus-editor-codemirror-cursor-label"></span><div class="salvus-editor-codemirror-cursor-inside">&nbsp;&nbsp;&nbsp;</div></div>

    <!-- Image viewer -->
    <div class="salvus-editor-image" style="margin-left: 1ex;">
        <span class="visible-xs">
            <span class="btn-group">
                <a href="#close" class="btn btn-default btn-lg"><i class="fa fa-toggle-up"></i> <span class="hidden-xs">Files...</span></a>
                <a class="btn btn-default btn-lg" href="#refresh"><i class="fa fa-refresh"></i>  Refresh</a>
            </span>
        </span>
        <span class="hidden-xs">
            <a class="btn btn-default" href="#refresh"><i class="fa fa-refresh"></i>  Refresh</a>
        </span>
        <div class="salvus-editor-image-title pull-right"> The title </div>
        <div class="salvus-editor-image-container"><img><span>Loading...</span></div>
    </div>


    <!-- Templates for the png-based PDF previewer; this is designed for the pdf changes in little ways locally.  -->
    <div class="salvus-editor-pdf-preview">
        <div class="salvus-editor-pdf-preview-spinner hide"></div>
        <div class="salvus-editor-pdf-preview-highlight hide"></div>
        <span class="salvus-editor-pdf-preview-buttons">
            <span class="btn-group">
                <a href="#zoom-preview-out" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Zoom out a little"><i class="fa fa-search-minus"></i></a>
                <a href="#zoom-preview-in" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Zoom in a little"><i class="fa fa-search-plus"></i></a>
                <a href="#zoom-preview-fullpage" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Zoom out to show the full page"><i class="fa fa-minus-square-o"></i></a>
                <a href="#zoom-preview-width" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Zoom in fairly close"><i class="fa fa-plus-square-o"></i></a>
                <a href="#preview-resolution" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Change the preview resolution"><i class="fa fa-th"></i></a>
                <a href="#pdf-download" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Download the PDF file"><i class="fa fa-download"></i></a>
            </span>
        </span>
        <div class="salvus-editor-pdf-preview-page">
        </div>
    </div>



    <!-- Templates for the embedded PDF previewer: just uses the built-in renderer; can't cope with file updates, inverse search, etc. -->
    <div class="salvus-editor-pdf-preview-embed">
        <div class="salvus-editor-pdf-preview-embed-spinner hide"></div>
        <a class="btn btn-default" href="#refresh"><i class="fa fa-refresh"></i><span class="hidden-xs"> Refresh</span></a>
        <div class="salvus-editor-pdf-title pull-right hidden-xs"> The title </div>
        <div class="salvus-editor-pdf-preview-embed-page">
        </div>
    </div>

    <!-- Template for the LaTeX editor -->
    <div class="salvus-editor-latex">
        <div class="salvus-editor-latex-latex_editor">
        </div>
        <div class="salvus-editor-latex-pdf-preview hide">
        </div>
        <div class="salvus-editor-latex-png-preview hide">
        </div>
        <div class="salvus-editor-latex-errors hide">
            <div style="margin-left:2em">
                <h3>Errors</h3>
                <div class="salvus-latex-errors">
                </div>
                <h3>Typesetting Issues</h3>
                <div class="salvus-latex-typesetting">
                </div>
                <h3>Other Warnings</h3>
                <div class="salvus-latex-warnings">
                </div>
                <div style="height:10em"></div>
            </div>
        </div>

        <!-- error/warning message templates -->

        <div class="salvus-editor-latex-mesg-template well hide">
            <a class="btn btn-default" style="max-width:80%">
                <i class="fa fa-mail-reply"></i>
                <span class="salvus-latex-mesg-line"></span>
                <span class="salvus-latex-mesg-page"></span>
                <span class="salvus-latex-mesg-file"></span>
                <span class="salvus-latex-mesg-message"></span>
            </a>
            <a class="btn pull-right btn-default">
                <i class="fa fa-mail-forward"></i>
            </a>
            <pre class="salvus-latex-mesg-content lighten hide"></pre>
        </div>

         <div class="salvus-editor-latex-log hide">
            <span class="btn-group pull-right" style="margin-right:1ex; margin-left:1ex">
                <a href="#latex-latex" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="left" title="Run Latex"><i class="fa fa-bolt"></i> Latex</a>
                <a href="#latex-bibtex" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="left" title="Run Bibtex"><i class="fa fa-bolt"></i> Bibtex</a>
                <a href="#latex-sage" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="left" title="Run Sagetex."><i class="fa fa-bolt"></i> Sage</a>
                <a href="#latex-trash-aux" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="left" title="Delete auxiliary build files."><i class="fa fa-trash-o"></i></a>
                <a href="#latex-command-undo" class="btn btn-sm btn-default" data-container="body" data-toggle="tooltip" data-placement="left" title="Reset build command."><i class="fa fa-times-circle"></i></a>
            </span>
            <input style="width:50%" type="text" class="form-control">
            <textarea rows="20" cols="100" class="well boxsizingBorder" readonly="" style="width:100%;background-color:white;">You have not run LaTeX yet.</textarea>
        </div>
        <div class="salvus-editor-latex-settings hide">
            <h1>Settings</h1>
        </div>
    </div>

    <div class="salvus-editor-history">
        <div class="salvus-editor-history-history_editor"></div>
    </div>

    <div class="sagews-input"><hr class="sagews-input-hr"></div>
    <div class="sagews-output"></div>

    <div class="salvus-ipython-notebook">
        <!--<h3 style="margin-left:1em">IPython Notebook: <span class="salvus-ipython-filename"></span></h3>-->
        <div class="salvus-ipython-notebook-buttons hidden-xs">
            <span class="salvus-ipython-notebook-status-messages lighten"> </span>
            <span class="hide salvus-ipython-notebook-danger">DANGER: Users on this VM could connect unless you stop your ipython-notebook server (they would have to know secret internal project-id).</span>
            <a href="#save" class="btn btn-sm btn-success" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Save .ipynb file to disk (file is constantly sync'd with server)."> <i class="fa fa-save"></i> Save</a>
            <a href="#reload" class="btn  btn-sm btn-warning" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Reload this Notebook; use if the IPython server is killed or restarted on another port"> <i class="fa fa-refresh"></i> Reload</a>
            <a href="#info" class="btn  btn-sm btn-info" data-container="body" data-toggle="tooltip" data-placement="bottom" title="Extra information about the IPython notebook"> <i class="fa fa-info-circle"></i> </a>
        </div>
        <div class="visible-xs">
            <span class="btn-group">
                <a href="#close" class="btn btn-default btn-lg"><i class="fa fa-toggle-up"></i> Files...</a>
                <a href="#save" class="btn btn-success btn-lg"> <i class="fa fa-save"></i> Save</a>
            </span>
            <span class="btn-group salvus-editor-codemirror-worksheet-buttons hide">
                <a href="#execute" class="btn btn-success btn-lg"> <i class="fa fa-play"></i>
                    <span>Run</span>
                </a>
                <a href="#interrupt" class="btn btn-warning btn-lg"> <i class="fa fa-stop"></i>
                    <span>Stop</span>
                </a>
                <a href="#tab" class="btn btn-default btn-lg"> <i class="fa fa-info-circle"></i>
                    <span>Tab</span>
                </a>
            </span>
            <span class="btn-group">
                <a href="#reload" class="btn btn-warning btn-lg"> <i class="fa fa-refresh"></i> Reload</a>
                <a href="#info" class="btn  btn-info btn-lg"> <i class="fa fa-info-circle"></i> </a>
            </span>
        </div>
        <h3 class="salvus-ipython-notebook-connecting hide" style="margin-left:2em">Connecting to IPython Notebook Server...</h3>
        <div class="salvus-ipython-notebook-notebook"></div>
    </div>


    <div class="modal salvus-file-print-dialog" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close btn-close" aria-hidden="true">
                        <span style="font-size:20pt;">×</span>
                    </button>
                    <h3><i class="fa fa-print"> </i>  Printable PDF version of <span class="salvus-file-print-filename"></span></h3>
                </div>
                <div class="well">
                    <h4>Heading<span class="lighten"> (click to edit)</span></h4>
                    <div class="well" style="background-color:white; text-align:center">
                        <h4 class="salvus-file-print-title" contenteditable="true"></h4>
                        <h5 class="salvus-file-print-author" contenteditable="true"></h5>
                        <h5 class="salvus-file-print-date" contenteditable="true"></h5>
                    </div>
                    <div class="salvus-file-options-sagews hide">
                        <h4>Worksheet Options</h4>
                        <div class="well" style="background-color:white">
                            <div class="checkbox"><label class="" rel="tooltip" title="Table of contents">
                                <input type="checkbox" checked="checked" class="salvus-file-print-contents" rel="tooltip">Table of contents
                            </label></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-close pull-left btn-default btn-lg">Close</button>
                    <button class="btn btn-primary btn-submit pull-left btn-lg"><i class="fa fa-bolt"> </i> Generate PDF</button>
                    <span class="salvus-file-printing-progress hide">Preparing PDF version...</span>
                    <a class="salvus-file-printing-link hide" target="_blank">link to PDF version</a>
                </div>
            </div>
        </div>
    </div>
    <div class="modal salvus-goto-line-dialog" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close btn-close" aria-hidden="true">
                        <span style="font-size:20pt;">×</span>
                    </button>
                    <h3><i class="fa fa-bolt"> </i>  Goto Line</h3>
                </div>
                <div class="well" style="margin:1em">
                    <div class="lighten">Enter <span class="salvus-goto-line-range"></span></div>
                    <input class="salvus-goto-line-input form-control" style="width:95%; margin-top: 1ex;" type="text" placeholder="">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-close btn-default">Cancel</button>
                    <button class="btn btn-primary btn-submit">OK</button>
                </div>
            </div>
        </div>
    </div>
</div>